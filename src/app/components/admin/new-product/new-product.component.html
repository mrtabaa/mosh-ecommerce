<form #f="ngForm" (ngSubmit)="onSubmit(f.value); f.reset();" fxLayout="column">
    <!-- 1st row -->
    <!-- TYPE -->
    <div fxLayout="row wrap" fxLayoutAlign="space-around center">
        <mat-form-field fxFlex="40" fxFlex.lt-sm="80">
            <mat-select placeholder="Type" required ngModel name="type" #selectedType>
                <mat-option *ngFor="let type of types" [value]="type">
                    {{type}}
                </mat-option>
                <!-- newType option -->
                <mat-option value="newType">
                    <mat-icon>add_circle_outline</mat-icon>
                    New Type
                </mat-option>
                <!-- MUST USE mat-select-trigger TO SHOW mat-icon -->
                <mat-select-trigger *ngIf="selectedType.value === 'newType'">
                    <mat-icon>add_circle_outline</mat-icon>
                    Fill out New Type field.
                </mat-select-trigger>
            </mat-select>
        </mat-form-field>
        <!-- newType input -->
        <mat-form-field *ngIf="selectedType.value === 'newType'" fxFlex="40" fxFlex.lt-sm="80" fxLayout="column">
            <input fxFlex matInput placeholder="New Type" required #newTypeOnKeyup (keyup)="newTypeOnKeyup.value" />
            <button mat-mini-fab class="btnNewType" (click)="addType(newTypeOnKeyup.value)"
                [disabled]="newTypeOnKeyup.value === ''">Add</button>
        </mat-form-field>

        <!-- CATEGORY -->
        <span id="category" fxFlex="40" fxFlex.lt-sm="80" fxLayout="column" *ngIf="selectedType.value !== 'newType'">
            <mat-form-field>
                <mat-select placeholder="Category" required ngModel name="category" #selectedCategory>
                    <mat-option *ngFor="let category of getCategories(selectedType.value)" [value]="category">
                        {{category}}
                    </mat-option>
                    <!-- newCategory option -->
                    <span *ngIf="selectedType.value !== null">
                        <mat-option value="newCategory" *ngIf="selectedType.value !== ''">
                            <mat-icon>add_circle_outline</mat-icon>
                            New Category
                        </mat-option>
                    </span>
                    <mat-select-trigger *ngIf="selectedCategory.value === 'newCategory' && selectedType.value !== ''">
                        <mat-icon>add_circle_outline</mat-icon>
                        Fill out New Category field.
                    </mat-select-trigger>
                </mat-select>
            </mat-form-field>
            <!-- newCategory input -->
            <mat-form-field *ngIf="selectedCategory.value === 'newCategory'" fxFlex="40" fxFlex.lt-sm="80"
                fxLayout="column">
                <input fxFlex matInput placeholder="New Category" required #newCategoryOnKeyup
                    (keyup)="newCategoryOnKeyup.value" />
                <button mat-mini-fab class="btnNewType"
                    (click)="addCategory(newCategoryOnKeyup.value, selectedType.value)"
                    [disabled]="newCategoryOnKeyup.value === ''">Add</button>
            </mat-form-field>
        </span>
    </div>

    <!-- 2nd row -->
    <div fxLayout="row wrap" fxLayoutAlign="space-around center">
        <!-- TITLE -->
        <mat-form-field fxFlex="40" fxFlex.lt-sm="80">
            <input matInput placeholder="Title" ngModel name="title" required minlength="3">
        </mat-form-field>
        <!-- PRICE -->
        <mat-form-field fxFlex="40" fxFlex.lt-sm="80">
            <input matInput placeholder="Price" required ngModel name="price">
            <span matPrefix>$&nbsp;</span>
        </mat-form-field>
        <!-- 3rd row -->
        <!-- IMAGEURL -->
        <mat-form-field fxFlex="80">
            <input matInput placeholder="Image URL" required ngModel name="imageUrl">
        </mat-form-field>
    </div>
    <!-- 4rd row -->
      <p>{{ f.value | json }}</p>
    <button fxFlexAlign="center" mat-raised-button color="primary" [disabled]="f.invalid" class="btnSave">Save</button>
</form>